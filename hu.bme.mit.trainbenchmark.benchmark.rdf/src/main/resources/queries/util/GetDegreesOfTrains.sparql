PREFIX  base: <http://www.semanticweb.org/ontologies/2015/trainbenchmark#>
PREFIX  rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT  ?x (( COUNT(?o) + COUNT(?s) ) AS ?degree)
WHERE
  { { ?x rdf:type base:Train}
      { ?x ?p ?o
        FILTER ( ( ! isLiteral(?o) ) && ( ?p != rdf:type ) )
      }
    UNION
      { { ?x rdf:type base:Train}
        { ?s ?p2 ?x
          FILTER ( ?p2 != rdf:type )
        }
      }
  }
GROUP BY ?x
